---
title   : "第一章 引言 - 区块链从概念到实战"
---

第一章 引言
=========

> 以正确的策略使用的技术、时间和空间一起改变了世界。

正如专家们所言，区块链是自互联网发明以来最吸引人和具有颠覆性的发明。

至 2018 年 1 月，全球约有 115 家超过 2000 名员工的初创公司在积极地开发区块链技术平台，
这些平台涉及金融、保险、旅游和供应链等不同领域。

## 历史背景简述

区块链主要与加密数字货币和金融行业相关。

根据 “商业内幕” 最近的报告显示，当前全世界的货币总额是 83.6 万亿元美元，
加密数字货币市场的总金额接近于 7600 亿美元，其中比特币就占了 1300 亿美元。

2018 年 10 月，中本聪 ( Satoshi Nakamoto ) 发表了一篇文章，名叫《比特币：一种点对点的电子现金系统》。
在这篇文章中，他向人们推介了以比特币为形态的数字/加密数字货币。同时，他也提出了区块链作为支持的技术构想。
在这之后的一年当中，中本聪在市场上发布了最初版本的比特币，并首次应用了区块链技术。
它被称为 “创世区块” ( Genesis Block ) ，在 2009 年 1 月 3 日被添加到了区块链网络上。

2009 年 1 月 12 日，比特币完成了第一笔交易。

比特币不仅仅是市场上第一个加密数字货币，更是迄今为止区块链技术框架的第一次应用。
正如许多专家所说的那样，比特币是自互联网被发明以来最具颠覆性的发明。

2010 年，中本聪逐渐淡出并将项目移交给比特币社区的其他成员。

今天的市场上有超过几千种不同的加密数字货币，可以访问下面网址查看：

- <http://coinmarketcap.com/all/views/all/>

市场上的大多数数字货币仍然以区块链为实施框架。区块链正在被更多的行业所采用，像野火一样逐渐蔓延开来。

## 为什么加密数字货币一触即发

自 20 世纪 80 年代以来，好多人已经开发了数字货币或电子货币，但由于技术或监管的原因，许多开发者都失败了。
只有诸如 PayPal, eCash, WebMoney, Liberty Reserve, Payoneer, cashU 等公司取得了成功，采用的都是权力集中的开发模式。

因此权力相对分散的加密数字货币一出现，便引起了人们的关注，加密数字货币具有一下优点：

- 普遍接受；
- 低交易费；
- 防诈欺；
- 即时结算；
- 防止身份被窃。

这要感谢区块链加密技术背后的去中心化的结构框架。

## 了解区块链

区块链的七个基本特性：

- 一个分布式的账本或登记簿。有些人称之为特殊类型的数据库，也可以把它看成一个登记簿；
- 它可以是公共的，也可以是私人的；
- 网络中的每个节点都带有账本的副本；
- 没有单点故障，没有停机时间；
- 区块链中的数据是不可篡改的，一旦存储就不可篡改；
- 数据库中的每个记录都被称为一个区块，并指向链中的上一个区块；
- 每个新的区块都包含一组事务，这些事务被添加到区块链的末尾。

### 为什么选择区块链

区块链是通过比特币而为人所知的，它是一种加密数字货币，概念上是用来解决传统数据库无法满足数字货币需求问题的：

- 区块链账本中的数据不可篡改；
- 这是一个高度安全的数据库，它使用公钥和密钥进行事务处理；
- 数据库公开面向所有人，可用于验证和添加事务；
- 由于区块链权力分散，所以没有停机时间，因此交易可以随时随地添加；
- 它可以是公共或私人的，并灵活地满足个人商业需求；
- 随时都可以接受审计。

### 区块链如何工作

接下来将了解如何将数据添加到区块链账本中。

顾名思义，区块链是一种块链式数据结构，每个区块指向前一个区块。

每个区块包括：

- 1) 一个区块头；
- 2) 区块中的一个或多个事务；
- 3) 一系列的 Ommers 或是叔区块，叔区块的父区块和当前区块的父区块是相同的。

Ommers 是未被选择用于包含在一致性链区块链中的分散区块。然而，矿工仍然可以通过它们挖掘少量的通证。

### 区块头

区块链是由一系列用特定逻辑而连接起来的区块组成的。每个区块都有一个头部，它具有一下信息：

- 1) 前一区块的哈希值；
- 2) 时间戳；
- 3) 挖掘或难度目标；
- 4) 工作量证明 ( PoW ) 的随机数；
- 5) 包含该事务的梅克尔根 ( Merkle root ) 的哈希值。

### 梅克尔根

在实际生活中，区块链更为复杂，每个区块可能包含很多项事务。每个事务都有一个与之关联的哈希值。
因此区块链被指定为哈希值，该哈希值是所有交易的哈希值，即区块的哈希值实际上是哈希值的哈希值，并且被保存在区块头中。
整个金字塔被称为矿工验证的梅克尔根。

如果改变了任何事务，梅克尔根值就会改变对一组交易完整性的验证。

正如比特币杂志 《Bitcoin Magazine》 和以太坊 ( Ethereum ) 的联合创始人 Vitalik Buterin 所说的那样：

> 梅克尔树是组成区块链的一个基本部分。虽然在理论上，确实存在在缺少梅克尔树的情况下建立区块链的可能性，
> 但如果仅仅通过创建直接包含每个交易的巨型区块，那样从长远来看会在使用最强计算机时消弱区块链的可信性，
> 这会给扩展性带来巨大的挑战。

运用这些信息，可以计算当前区块的哈希值，并存储在当前区块和下一个区块中。

接下来用 Java 当然也可以用任何自己喜欢的编程语言来创建一个区块链模型。

## 开始

现在通过一些实际的编程例子来介绍整个区块链的运作模式。

下面将介绍 Java 的三个类定义：

- `Block.java`
- `BlockChain.java`
- `BlockChainClient.java`

可以将 `Block.java` 视为区块链中的区块，它具有交易信息和时间戳等常规数据。

`BlockChain.java` 由一个数组或可扩展数组组成，用户可以在其中添加区块。
默认情况下，当区块链类被实例化时，创世区块已经存在了。

人们可以从 `BlockChainClient` 里进一步向 `BlockChain` 添加更多的区块。

这是一个非常简单的例子。人们在每个区块中只使用了一个事务。
然而，在实际生活中，区块中可能有许多这样的事务，并且区块哈希值是由该区块所有事务的联合哈希值计算出来的。

```java
package com.java.blockChain;
import java.security.MessageDigest;
import javax.xml.bind.DatatypeConverter;

public class Block {
    private int index;
    private String dateTimeStampOfTransaction;
    private String transactionDetails;
    private String previousHash;
    private String hash;
    private int nonce;

    public Block (int index, String date, String transaction, String previousHash, int nonce) {
        this.index = index;
        this.dateTimeStampOfTransaction = date;
        this.transactionDetails = transaction;
        this.previousHash = previousHash;
        this.nonce = nonce;
        this.hash = calculateHash();
    }

    public String calculateHash () {
        // ...
    }
}
```
