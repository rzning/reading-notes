---
title   : "你不知道的 Javascript 上卷"
---

> 第一部分 作用域和闭包 Scope & Closures

第三章 函数作用域和块级作用域
=========================

## 3.1 函数中的作用域

通常认为 JavaScript 具有基于函数的作用域，每声明一个函数就会为自身创建一个作用域，而其他结构不会创建。

## 3.2 隐藏内部实现

可以使用函数创建一个作用域将一段代码包裹起来，在外边看来其内部声明的变量被隐藏了。这种处理方法满足了最小授权或最小暴露原则。

隐藏作用域中的变量和函数，可以避免同名标识符之间的冲突。命名冲突会导致变量值被意外覆盖。

```js
function foo () {
  function bar (a) {
    i = 3;
    console.log(a + i);
  }

  for (var i = 0; i < 10; i++) {
    bar(i * 2);
  }
}

// => Error: 将造成无限循环
```

上例中 `bar()` 内部的赋值表达式 `i = 3` 以外的覆盖了声明在 `foo()` 内部的 for 循环中的 i 变量，从而导致无限循环。

在 `bar()` 内部的赋值操作，需要声明一个本地变量来使用，例如 `var i = 3` 就可以避免冲突，也可以声明一个不同名称的变量。

## 3.3 函数作用域
